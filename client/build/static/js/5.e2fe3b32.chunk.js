(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[5],{92:function(e,t,s){"use strict";s.r(t);var l=s(12),c=s.n(l),a=s(21),r=s(80),n=s(0),o=s(3),i=s(24),j=s.n(i),d=s(19),x=s.n(d),f=s(26),m=Object(n.createContext)(null),b=s(84),u=s(2),p=function(e){var t=Object(f.b)(),s=Object(n.useContext)(m),l=Object(f.c)((function(e){return e.userState.user}));console.log("CURRENT MODAL USERS: ",l);var o=function(){s.setModal((function(e){return!e}))},i=Object(n.useState)(""),d=Object(r.a)(i,2),p=d[0],h=d[1],g=Object(n.useState)(""),O=Object(r.a)(g,2),w=O[0],N=O[1],y=function(){var s=new FormData;s.append("post_caption",w),s.append("posted_by_username",e.username),s.append("posted_by_dp",e.dp),s.append("post_image",p),console.log("FORM SENT"),console.log("FORM DATA: ",s),t(function(e){return function(){var t=Object(a.a)(c.a.mark((function t(s){var l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{l={auth_token:x.a.get("access_token"),"Content-Type":"application/x-www-form-urlencoded"},j.a.post("http://localhost:4000/post/create",e,{headers:l}).then((function(e){console.log("POST DATA: ",e)}))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(s))};return console.log("POST IMAGE: ",p),console.log("USERNAME: ",e.username),console.log("POST CAPTION: ",w),Object(u.jsx)("div",{className:"w-full h-screen z-50 bg-gray-600 flex justify-center items-center fixed",style:{backgroundColor:"rgba(0,0,0,0.7)"},children:Object(u.jsxs)("div",{className:"w-3/4 h-full bg-white rounded-lg overflow-scroll",children:[Object(u.jsx)("div",{className:"w-full border-b-2 border-gray-200 flex justify-end items-center py-4 px-4 sticky",children:Object(u.jsxs)("div",{className:"w-full flex flex-row justify-between items-stretch ",children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:"images/iglogo1.png",alt:"ig"})}),Object(u.jsx)("h1",{className:"text-xl  font-bold text-gray-600",children:"New Post"}),Object(u.jsx)("h1",{children:Object(u.jsx)("button",{className:"border-0",onClick:o,children:Object(u.jsx)(b.a,{size:30,color:"black"})})})]})}),Object(u.jsxs)("form",{action:"#",className:"w-full h-5/6 flex flex-col justify-center items-center",children:[p?Object(u.jsx)("img",{src:URL.createObjectURL(p),alt:"gallery logo",className:"h-1/2 py-4"}):Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("img",{src:"images/galleryimg.svg",alt:"gallery logo",className:"w-5/6"}),Object(u.jsx)("h1",{className:"font-400 text-black text-xl py-4",children:"Drag photos and videos here."})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("label",{className:"bg-blue-600 p-2 rounded-lg placeholder-white flex flex-col justify-center items-center ",children:[" ",Object(u.jsx)("p",{className:"text-white font-400 text-sm",children:"Select From Computer"}),Object(u.jsx)("input",{type:"file",accept:"image/gif, image/jpeg, image/png,image/jpg",name:"image",id:"file",onChange:function(e){var t=e.target.files[0];console.log("IMAGE PATH: ",e.target.files[0])," "!==t&&void 0!==t?h(t):alert("Image selected is of type ".concat(typeof t))},size:"60",className:"hidden"})]})}),Object(u.jsx)("div",{className:"w-3/4  h-24  border-t-2 border-gray-200  flex flex-col justify-start items-start pt-8 pl-8 mt-4",children:Object(u.jsxs)("div",{className:"w-full flex flex-col justify-end items-end mt-2",children:[Object(u.jsx)("textarea",{placeholder:"Enter your caption here!",className:"w-full border border-gray-500 rounded-lg pl-4 pt-4",rows:"4",value:w,onChange:function(e){return N(e.target.value)}}),Object(u.jsx)("button",{onClick:function(){y(),o()},className:"bg-blue-600 w-1/4 p-2 rounded-lg placeholder-white flex flex-col justify-center items-center mt-4",children:Object(u.jsx)("p",{className:"text-white font-bold",children:"Post"})})]})})]})]})})},h=s(85),g=s(82),O=s(86),w=s(83),N=function(e){var t=Object(f.b)(),s=Object(n.useState)(!!e.likes_array.includes(e.currentuser_id)),l=Object(r.a)(s,2),o=l[0],i=l[1],d=Object(n.useState)(e.likes),m=Object(r.a)(d,2),b=m[0],p=m[1],N=Object(n.useState)(!1),y=Object(r.a)(N,2),v=y[0],k=y[1],_=function(s,l){var r;console.log("Liked Status: ",s),s?(i((function(e){return!e})),t((r=e.post_id,function(){var e=Object(a.a)(c.a.mark((function e(t){var s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s={post_id:r},l={auth_token:x.a.get("access_token")},j.a.post("http://localhost:4000/post/unlike",s,{headers:l}).then((function(e){console.log("Unliked Successfully")}))}catch(t){console.log(t.message)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),p((function(e){return e-1}))):s||(i((function(e){return!e})),t(function(e){return function(){var t=Object(a.a)(c.a.mark((function t(s){var l,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{l={post_id:e},a={auth_token:x.a.get("access_token")},j.a.post("http://localhost:4000/post/like",l,{headers:a}).then((function(e){console.log("Liked Succesfully")}))}catch(s){console.log(s.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e.post_id)),p((function(e){return e+1})))};return Object(u.jsxs)("div",{className:"  flex flex-col my-8 mx-16 ",children:[Object(u.jsxs)("div",{className:"w-full flex flex-row justify-between items-center p-4  px-8",children:[Object(u.jsxs)("div",{className:"w-full flex flex-row items-center justify-start ",children:[e.dp?Object(u.jsx)("img",{src:e.dp,alt:"user profile",className:"rounded-full w-8"}):Object(u.jsx)("img",{src:"images/avatars/default.png",alt:"user profile",className:"rounded-full w-8"}),Object(u.jsx)("p",{className:"pl-2 text-gray-800 font-bold",children:e.username})]}),Object(u.jsx)("div",{className:"w-2/6 flex flex-col justify-items-end items-end",children:Object(u.jsx)(h.a,{size:30,color:"black"})})]}),Object(u.jsx)("div",{className:"w-full  flex flex-col justify-center items-center rounded-md",children:Object(u.jsx)("img",{src:e.image,alt:"post",className:"w-full  rounded-xl shadow-lg"})}),e.caption&&Object(u.jsxs)("div",{className:"w-full flex flex-row items-center justify-start px-2 pt-3 ",children:[Object(u.jsx)("p",{className:"text-gray-900 font-bold  text-sm rounded-lg p-1",children:e.username}),Object(u.jsx)("p",{className:"text-gray-700 text-md ml-2",children:e.caption})]}),Object(u.jsxs)("div",{className:"w-full flex flex-row justify-between items-center ",children:[Object(u.jsxs)("div",{className:"w-1/6 flex flex-row p-2 justify-around",children:[Object(u.jsx)("button",{onClick:function(){_(o)},style:{border:"0px",backgroundColor:"transparent"},children:o?Object(u.jsx)(g.a,{size:25,color:"red"}):Object(u.jsx)(g.b,{size:25,color:"rgba(0,0,0,0.8)"})}),Object(u.jsx)(O.a,{size:23,color:"rgba(0,0,0,0.8)"})]}),Object(u.jsx)("div",{className:"w-1/3 flex flex-col justify-items-end items-end pr-2",children:Object(u.jsx)("button",{style:{border:"0px",backgroundColor:"transparent"},onClick:function(e){k((function(e){return!e}))},children:v?Object(u.jsx)(w.c,{size:24,color:"white"}):Object(u.jsx)(w.b,{size:24,color:"white"})})})]}),Object(u.jsxs)("p",{className:"font-bold pl-3 text-md text-gray-800",children:[b," likes"]}),Object(u.jsx)("div",{className:"w-full ",children:Object(u.jsx)("div",{className:"w-full"})})]})},y=function(e){return Object(u.jsxs)("div",{className:"flex flex-row justify-center items-center w-full px-2 my-2",children:[Object(u.jsx)("img",{src:e.profile_image,alt:"user profile",className:"rounded-full w-12 mr-2"}),Object(u.jsxs)("div",{className:"flex flex-col justify-start items-start w-28 max-w-xs",children:[Object(u.jsx)("p",{className:"font-bold text-sm",children:e.name}),Object(u.jsxs)("p",{className:"font-thin text-xs",children:["@",e.username]})]}),Object(u.jsx)("button",{className:"ml-8 bg-blue-500 rounded-md p-2 ",children:Object(u.jsx)("p",{className:"text-xs text-white font-medium",children:"Follow"})})]})},v=function(e){return Object(u.jsxs)("div",{className:"flex flex-col my-8 shadow-xl bg-white flex flex-col justify-start items-start ",children:[Object(u.jsxs)("div",{className:"flex justify-start  w-full p-4",children:[Object(u.jsx)("h1",{className:"font-bold text-md text-gray-500",children:"Suggestions for you"})," "]}),Object(u.jsxs)("div",{className:"flex flex-col justify-start items-start  pl-3 overflow-scroll",children:[Object(u.jsx)(y,{profile_image:"images/avatars/orwell.jpg",name:"Karl Hadwen",username:"karlhadwen"}),Object(u.jsx)(y,{profile_image:"images/avatars/dali.jpg",name:"Jessy J.",username:"jesss112"}),Object(u.jsx)(y,{profile_image:"images/avatars/default.png",name:"Albert Nova",username:"albert_the_great"}),Object(u.jsx)(y,{profile_image:"images/avatars/raphael.jpg",name:"Stephen King",username:"stephenking18"})]})]})},k=s(15),_=s(14),S=s(88),C=s(87),z=s(89),A=function(e){var t=Object(f.b)(),s=Object(o.g)(),l=Object(n.useContext)(m);return Object(u.jsxs)("div",{className:"  w-full flex flex-col z-10 bg-red-500",children:[Object(u.jsxs)("div",{className:" flex flex-row w-full justify-between items-center  ",children:[Object(u.jsx)("div",{className:"col-span-1 fixed left-8 top-4 ",children:Object(u.jsx)("img",{src:"/images/iglogo1.png",alt:"Instagram",className:"max-h-8"})}),Object(u.jsx)("div",{className:"col-span-2 flex flex-row w-full justify-start items-start fixed left-24 top-3",children:Object(u.jsx)("img",{src:"/images/logo.png",alt:"Instagram",className:"h-8 mt-2"})})]}),Object(u.jsxs)("div",{className:"flex flex-col  justify-center items-center mt-8  fixed left-24 top-12 ",children:[Object(u.jsx)("img",{src:"images/avatars/default.png",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"}),Object(u.jsx)("h1",{className:"text-gray-800 font-bold pt-4",children:e.name}),Object(u.jsxs)("h2",{className:"text-gray-400 font-bold",children:["@",e.username]})]}),Object(u.jsxs)("div",{className:"grid grid-cols-3 mt-8 fixed left-0.5 top-56",children:[Object(u.jsxs)("div",{className:"col-span-1 flex flex-col justify-center items-center px-1",children:[Object(u.jsx)("h2",{className:"text-gray-800 font-bold",children:e.posts}),Object(u.jsx)("h1",{className:"text-gray-400 font-bold",children:"Posts"})]}),Object(u.jsxs)("div",{className:"col-span-1 flex flex-col justify-center items-center border-l border-gray-600 px-2 pt-1",children:[Object(u.jsx)("h2",{className:"text-gray-800 font-bold",children:e.following}),Object(u.jsx)("h1",{className:"text-gray-400 font-bold",children:"Following"})]}),Object(u.jsxs)("div",{className:"col-span-1 flex flex-col justify-center items-center border-l border-gray-600 px-2 pt-1",children:[Object(u.jsx)("h2",{className:"text-gray-800 font-bold",children:e.followers}),Object(u.jsx)("h1",{className:"text-gray-400 font-bold",children:"Followers"})]})]}),Object(u.jsxs)("div",{className:"flex w-1/4 flex-col mt-8 pl-8 fixed top-72 left-8",children:[Object(u.jsxs)("button",{onClick:function(){l.setModal((function(e){return!e}))},className:"w-1/2 flex flex-row justify-start items-center mt-4 z-10",children:[Object(u.jsx)(w.d,{color:"orange",size:28}),Object(u.jsx)("h1",{className:"text-gray-800 font-bold pl-4 text-white ",children:"Create"})]}),Object(u.jsxs)("div",{className:"w-1/2 flex flex-row justify-start items-center mt-4",children:[Object(u.jsx)(C.a,{color:"black",size:26}),Object(u.jsx)("h1",{className:"text-gray-800 font-400 pl-4 ",children:"Feed"})]}),Object(u.jsxs)("div",{className:"w-1/2 flex flex-row justify-start items-center mt-4",children:[Object(u.jsx)(g.c,{color:"black",size:24}),Object(u.jsx)("h1",{className:"text-gray-800 font-400 pl-4",children:"Explore"})]}),Object(u.jsxs)("div",{className:"w-1/2 flex flex-row justify-start items-center mt-4",children:[Object(u.jsx)(w.a,{color:"black",size:25}),Object(u.jsx)("h1",{className:"text-gray-800 font-400 pl-4",children:"Notifications"})]}),Object(u.jsxs)("div",{className:"w-1/2 flex flex-row justify-start items-center mt-4",children:[Object(u.jsx)(S.a,{color:"black",size:24}),Object(u.jsx)("h1",{className:"text-gray-800 font-400 pl-4",children:"Direct"})]}),Object(u.jsxs)("button",{className:"w-1/2 flex flex-row justify-start items-center mt-4 border-0",onClick:function(){console.log("Signout Clicked"),t(Object(k.e)()),s.push(_.b)},children:[Object(u.jsx)(z.a,{color:"gray",size:25}),Object(u.jsx)("h1",{className:"text-gray-600 font-400 pl-4",children:"Logout"})]})]})]})},T=function(e){return Object(u.jsxs)("div",{className:"h-28  w-1/2 flex flex-row justify-start border border-gray-200 shadow-lg items-center overflow-x-scroll bg-gray-100 ",children:[Object(u.jsx)("div",{className:"mx-1 w-20",children:Object(u.jsx)("img",{src:"images/avatars/orwell.jpg",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"})}),Object(u.jsx)("div",{className:"mx-1 w-20",children:Object(u.jsx)("img",{src:"images/avatars/orwell.jpg",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"})}),Object(u.jsx)("div",{className:"mx-1 w-20",children:Object(u.jsx)("img",{src:"images/avatars/orwell.jpg",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"})}),Object(u.jsx)("div",{className:"mx-1 w-20",children:Object(u.jsx)("img",{src:"images/avatars/orwell.jpg",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"})}),Object(u.jsx)("div",{className:"mx-1 w-20",style:{minWidth:"40px"},children:Object(u.jsx)("img",{src:"images/avatars/orwell.jpg",alt:"avatar",className:"w-24 rounded-full border-4 border-pink-500"})})]})};t.default=function(e){var t=Object(n.useState)(!1),s=Object(r.a)(t,2),l=s[0],i=s[1],d=Object(n.useState)([]),x=Object(r.a)(d,2),b=x[0],h=x[1],g=Object(f.c)((function(e){return e.userState.user}));function O(){return(O=Object(a.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()("http://localhost:4000/post");case 3:return t=e.sent,e.next=6,t.data;case 6:s=e.sent,h(s),console.log("STATE: ",b),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useLayoutEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),null===g?Object(u.jsx)(o.a,{to:_.b}):Object(u.jsxs)(u.Fragment,{children:[null===g&&Object(u.jsx)(o.a,{to:_.b}),Object(u.jsxs)(m.Provider,{value:{modal:l,setModal:i},children:[l?Object(u.jsx)(p,{username:g.username,name:g.display_name,dp:g.profile_picture}):"",Object(u.jsxs)("div",{className:"  flex flex-row h-screen scroll-none z-",children:[Object(u.jsx)("div",{className:"flex flex-col justify-items-end items-end bg-red-800  ",children:Object(u.jsx)(A,{name:g.display_name,username:g.username,followers:g.followers.length,following:g.following.length,posts:g.user_posts.length})}),Object(u.jsxs)("div",{className:"bg-white absolute overflow-y-scroll left-72 ",children:[Object(u.jsxs)("div",{className:"w-full flex flex-col justify-start items-start mt-16 ml-16",children:[Object(u.jsx)("div",{className:"w-full justify-start mb-2",children:Object(u.jsx)("h1",{className:"text- font-bold text-left",children:"Stories"})}),Object(u.jsx)(T,{})]}),Object(u.jsxs)("div",{className:"flex flex-col w-3/4 ",children:[!b&&Object(u.jsx)("h1",{children:"...Loading"}),b.map((function(e){return Object(u.jsx)("div",{className:"row-end-3 row-span-",children:Object(u.jsx)(N,{post_id:e._id,currentuser_id:g._id,image:"http://localhost:4000/"+e.post_image,caption:e.post_caption,username:e.posted_by_username,likes:e.likes.length,likes_array:e.likes,dp:e.posted_by_dp},e._id)})}))]})]}),Object(u.jsx)("div",{className:"fixed right-10  w-72 mb-10",children:Object(u.jsx)(v,{})})]})]})]})}}}]);
//# sourceMappingURL=5.e2fe3b32.chunk.js.map